/* -*- c -*-
 * Copyright © 2009 CNRS, INRIA, Université Bordeaux 1
 * Copyright © 2009 Cisco Systems, Inc.  All rights reserved.
 * See COPYING in top-level directory.
 */

/* The configuration file */

#ifndef HWLOC_CONFIG_H
#define HWLOC_CONFIG_H

#if (__GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 95))
# define __hwloc_restrict __restrict
#else
# if __STDC_VERSION__ >= 199901L
#  define __hwloc_restrict restrict
# else
#  define __hwloc_restrict
# endif
#endif

#ifdef HWLOC_HAVE_ATTRIBUTE_UNUSED
# if HWLOC_HAVE_ATTRIBUTE_UNUSED
#  define __hwloc_attribute_unused __attribute__((__unused__))
# else
#  define __hwloc_attribute_unused
# endif
#else
# define __hwloc_attribute_unused
#endif

#ifdef HWLOC_HAVE_ATTRIBUTE_MALLOC
# if HWLOC_HAVE_ATTRIBUTE_MALLOC
#  define __hwloc_attribute_malloc __attribute__((__malloc__))
# else
#  define __hwloc_attribute_malloc
# endif
#else
# define __hwloc_attribute_malloc
#endif

#ifdef HWLOC_HAVE_ATTRIBUTE_CONST
# if HWLOC_HAVE_ATTRIBUTE_CONST
#  define __hwloc_attribute_const __attribute__((__const__))
# else
#  define __hwloc_attribute_const
# endif
#else
# define __hwloc_attribute_const
#endif

#ifdef HWLOC_HAVE_ATTRIBUTE_PURE
# if HWLOC_HAVE_ATTRIBUTE_PURE
#  define __hwloc_attribute_pure __attribute__((__pure__))
# else
#  define __hwloc_attribute_pure
# endif
#else
# define __hwloc_attribute_pure
#endif

#ifdef HWLOC_C_HAVE_VISIBILITY
# if HWLOC_C_HAVE_VISIBILITY
#  define HWLOC_DECLSPEC __attribute__((__visibility__("default")))
# else
#  define HWLOC_DECLSPEC
# endif
#else
# define HWLOC_DECLSPEC
#endif

/* Define to 1 on Linux */
#undef HWLOC_LINUX_SYS

/* Define to 1 if the CPU_SET macro works */
#undef HWLOC_HAVE_CPU_SET

#define HWLOC_NBMAXCPUS	1024

#undef HWLOC_SIZEOF_UNSIGNED_LONG
#undef HWLOC_SIZEOF_UNSIGNED_INT

#define HWLOC_BITS_PER_LONG (HWLOC_SIZEOF_UNSIGNED_LONG * 8)
#define HWLOC_BITS_PER_INT (HWLOC_SIZEOF_UNSIGNED_INT * 8)


#if (HWLOC_BITS_PER_LONG != 32) && (HWLOC_BITS_PER_LONG != 64)
#error "unknown size for unsigned long."
#endif

#if (HWLOC_BITS_PER_INT != 16) && (HWLOC_BITS_PER_INT != 32) && (HWLOC_BITS_PER_INT != 64)
#error "unknown size for unsigned int."
#endif

#include <unistd.h>

#undef HWLOC_HAVE_WINDOWS_H
#undef hwloc_pid_t
#undef hwloc_thread_t

#ifdef HWLOC_HAVE_WINDOWS_H
#  include <windows.h>
#else /* HWLOC_HAVE_WINDOWS_H */
#  ifdef hwloc_thread_t
#    include <pthread.h>
#  endif /* hwloc_thread_t */
#endif /* HWLOC_HAVE_WINDOWS_H */

/* Do we need to transform all the hwloc public symbol names? */
#undef HWLOC_SYM_TRANSFORM

/* If we are transforming, what are the prefixes? */
#undef HWLOC_SYM_PREFIX
#undef HWLOC_SYM_PREFIX_CAPS

#endif /* HWLOC_CONFIG_H */
